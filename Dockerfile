FROM fedora:latest

LABEL maintainer="accesmaker.mlbb@gmail.com"
LABEL version="1.0"
LABEL description="Imagem Docker com ferramentas de segurança instaladas"

# atualiza o sistema e instala as ferramentas de segurança
RUN dnf -y update && \
    dnf -y group install "Development Tools" && \
    dnf -y install fish ruby nmap nikto dnsenum ffuf gobuster aircrack-ng tcpdump hydra john wireshark glibc git gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel libcurl-devel patch rpm-build libxcrypt-compat python-is-python3 python-pip kismet wfuzz && \
    dnf clean all

RUN curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > msfinstall && \
  chmod 755 msfinstall && \
  ./msfinstall

RUN cd /tmp && \
    wget https://gitlab.com/exploit-database/exploitdb/-/archive/main/exploitdb-main.tar.gz && \
    tar -zxvf exploitdb-main.tar.gz && \
    mv exploitdb-main /opt/exploitdb && \
    ln -sf /opt/exploitdb/searchsploit /usr/local/bin/searchsploit


RUN wget https://github.com/3ndG4me/KaliLists/archive/refs/heads/master.zip && \
   unzip master.zip && \
   mv KaliLists-master /usr/share/wordlists && \
   wget https://gitlab.com/kalilinux/packages/seclists/-/archive/kali/master/seclists-kali-master.tar.gz && \
   tar -zxvf seclists-kali-master.tar.gz && \
   mv seclists-kali-master /usr/share/seclists

RUN wget https://gitlab.com/kalilinux/packages/hash-identifier/-/archive/kali/master/hash-identifier-kali-master.tar.gz && \
    tar -zxvf hash-identifier-kali-master.tar.gz && \
    mv hash-identifier-kali-master /opt/hashid && \
    chmod a+x /opt/hashid/hash-id.py && \
    ln -sf /opt/hashid/hash-id.py /usr/local/bin/hashid

RUN wget https://gitlab.com/kalilinux/packages/0trace/-/archive/kali/master/0trace-kali-master.tar.gz && \
    tar -zxvf 0trace-kali-master.tar.gz && \
    mv 0trace-kali-master /opt/0trace && \
    chmod a+x /opt/0trace/0trace.sh && \
    ln -sf /opt/0trace/0trace.sh /usr/local/bin/0trace

RUN wget https://gitlab.com/kalilinux/packages/enum4linux/-/archive/kali/master/enum4linux-kali-master.tar.gz && \
    tar -zxvf enum4linux-kali-master.tar.gz && \
    mv enum4linux-kali-master /opt/enum4linux && \
    chmod a+x /opt/enum4linux/enum4linux.pl && \
    ln -sf /opt/enum4linux/enum4linux.pl /usr/local/bin/enum4linux

RUN pip install fierce && \
    pip install wafw00f && \
    pip install spyder-ml && \
    pip install sqlmap

RUN rm /tmp/*	&& \
    gem install wpscan

COPY tools-update.sh /opt/
RUN chmod +x /opt/tools-update.sh && ln -sf /opt/tools-update.sh /usr/local/bin/updatetools


RUN cd && \
    mkdir linpeas && \
    wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh && \
    mv linpeas.sh linpeas/


# define o diretório de trabalho padrão
WORKDIR /root

# define o comando padrão
CMD ["/bin/fish"]

